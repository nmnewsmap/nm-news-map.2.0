<!DOCTYPE html>
<html lang="en">
<head>

    <title>New Mexico News Media Map</title>

    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="New Mexico News Media Map" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet" />
    <link href="assets/css/map.css" rel="stylesheet" />

    <link href="assets/fonts/fontawesome/css/fontawesome.min.css" rel="stylesheet" />
    <link href="assets/fonts/fontawesome/css/brands.min.css" rel="stylesheet" />
    <link href="assets/fonts/fontawesome/css/solid.min.css" rel="stylesheet" />

</head>

<body>

    <div id="map"></div>

    <div id="legend" class="legend"></div>

    <!-- Census Overlay Controls -->
    <div id="census-controls" style="position: absolute; top: 280px; right: 10px; background: rgba(255, 255, 255, 0.5); padding: 10px; border-radius: 5px; box-shadow: 0 1px 4px rgba(0,0,0,0.3); font-size: 12px; width: 220px; z-index: 1000; backdrop-filter: blur(5px);">
        <div style="font-weight: bold; margin-bottom: 8px; color: #333;">Census Data Overlays</div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="none" checked style="margin-right: 5px;">
            No Overlay
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="population" style="margin-right: 5px;">
            Population Size
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="income" style="margin-right: 5px;">
            Median Household Income
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="business" style="margin-right: 5px;">
            Private Business
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="education" style="margin-right: 5px;">
            College Education
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="age" style="margin-right: 5px;">
            Median Age
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="nonwhite" style="margin-right: 5px;">
            Nonwhite Population
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="broadband" style="margin-right: 5px;">
            Homes with Broadband
            </label>
        </div>
        <div id="census-legend" style="margin-top: 10px; padding-top: 8px; border-top: 1px solid #ddd; font-size: 10px;">
            <!-- Dynamic legend will appear here -->
        </div>
        <div style="margin-top: 10px; padding-top: 8px; border-top: 1px solid #ddd; font-size: 9px; color: #666; line-height: 1.3;">
            <strong>Data Source:</strong><br>
            U.S. Census Bureau<br>
            2022 American Community Survey<br>
            5-Year Estimates
        </div>
    </div>

    <script src="assets/data/outlets_geojson.js"></script>
    <script src="assets/data/census_json.js"></script>
    <script src="assets/js/controls.js"></script>
    <script src="assets/js/map.js"></script>

    <div id="map-templates">
        <div data-template="popup">

            <div class="map-popup-wrapper">

                <div class="mp-container">

                    <a href="javascript:;" class="mp-close" title="Close popup"><i class="fa-solid fa-xmark"></i></a>

                    <div class="mp-top">
                        <div class="mp-cil-container">
                            <span data-mp-property="cil_number"></span>
                        </div>
                    </div>

                    <div class="mp-header">
                        <h4 data-mp-property="outlet_name"></h4>
                        <p data-mp-property="summary"></p>
                    </div>

                    <div class="mp-body">
                        <div class="mp-body-column">
                            <div class="mp-column-item" data-mp-property-pair="owner_name">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="owner_type">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="city_based">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="counties_served">
                                <label></label>
                                <span></span>
                            </div>
                        </div>
                        <div class="mp-body-column">
                            <div class="mp-column-item" data-mp-property-pair="medium_primary">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="frequency">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="language">
                                <label></label>
                                <span></span>
                            </div>
                        </div>
                    </div>

                    <div class="mp-footer">

                        <div class="mp-footer-column">
                            <a href="#" data-mp-property="website" title="#" target="_blank" class="mp-button">
                                <i class="fa-solid fa-globe"></i>
                                <span data-mp-property-label="website"></span>
                            </a>
                        </div>

                        <div class="mp-footer-column">
                            <div class="mp-footer-date">
                                <span data-mp-property-label="updated_at"></span>&nbsp;<span data-mp-property="updated_at"></span>
                            </div>
                            <div class="mp-footer-icons">
                                <a href="#" data-type="template" title="#" target="_blank"></a>
                            </div>
                        </div>

                    </div>

                </div>

            </div>

        </div>
    </div>

</body>
</html>