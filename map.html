<!DOCTYPE html>
<html lang="en">
<head>

    <title>New Mexico News Ecosystem Map</title>
    <link rel="icon" type="image/png" href="assets/media/favicon.png">

    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="New Mexico News Media Map">

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
    <link href="assets/css/map.css" rel="stylesheet">

    <link href="assets/fonts/fontawesome/css/fontawesome.min.css" rel="stylesheet">
    <link href="assets/fonts/fontawesome/css/brands.min.css" rel="stylesheet">
    <link href="assets/fonts/fontawesome/css/solid.min.css" rel="stylesheet">

</head>

<body>

    <div id="map">

        <div id="menu" data-visible="false">
            <div id="menu-header">
                <div id="menu-toggle">
                    <a href="javascript:;" title="Toggle Menu">
                        <i class="fa-solid fa-bars" data-visible="false"></i>
                        <i class="fa-solid fa-xmark" data-visible="true"></i>
                    </a>
                </div>
                <div id="menu-logo">
                    <a href="https://www.nmnewsmap.org/" title="New Mexico News Map" target="_parent">
                        <img id="menu-logo-brandmark" src="assets/media/logo-nmmap-brandmark.png" alt="NM News Map Brand Mark" data-visible="false">
                        <img id="menu-logo-full" src="assets/media/logo-nmmap-full.png" alt="NM News Map Logo" data-visible="true">
                    </a>
                </div>
            </div>

            <div class="menu-containers">
                <div class="menu-container" data-container="filters">
                    <div class="mc-header">
                        <h3>Filter Data</h3>
                        <div class="mc-header-description">Select options for the map</div>
                    </div>
                    <div class="mc-categories">
                        <div class="mc-category-wrapper" data-type="template">
                            <div class="mc-category">
                                <div class="mc-category-title">
                                    <div class="mc-item-input">
                                        <button type="button"></button>
                                    </div>
                                    <div class="mc-item-label"></div>
                                </div>
                                <div class="mc-category-options">
                                    <div class="mc-category-option-wrapper" data-type="template">
                                        <div class="mc-category-option">
                                            <div class="mc-item-input">
                                                <button type="button"></button>
                                            </div>
                                            <div class="mc-item-label"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="menu-container" data-container="layers">
                    <div class="mc-header">
                        <h3>Census Layer</h3>
                        <div class="mc-header-description">Provided by <em>U.S. Census Bureau, 2022 American Community Survey (5-Year Estimates)</em>.<br> Select a layer for the map</div>
                    </div>
                    <div class="mc-categories">
                        <div class="mc-category-wrapper" data-type="template">
                            <div class="mc-category">
                                <div class="mc-category-title">
                                    <div class="mc-item-input">
                                        <button type="button"></button>
                                    </div>
                                    <div class="mc-item-label"></div>
                                </div>
                                <div class="mc-category-options">
                                    <div class="mc-category-option-wrapper" data-type="template">
                                        <div class="mc-category-option">
                                            <div class="mc-item-input">
                                                <button type="button"></button>
                                            </div>
                                            <div class="mc-item-label"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <div id="map-canvas"></div>
    </div>

    <div id="map-templates">
        <div data-template="marker">
            <div class="map-marker">
                <div class="map-marker-icon"></div>
            </div>
        </div>

        <div data-template="popup">

            <div class="map-popup-wrapper">

                <div class="mp-container">

                    <a href="javascript:;" class="mp-close" title="Close popup"><i class="fa-solid fa-xmark"></i></a>

                    <div class="mp-top">
                        <div class="mp-cil-container">
                            <span data-mp-property="cil_number" class="score"></span>
                            <span class="progress" data-mp-property="cil_percent"></span>
                        </div>

                        <div class="mp-cil-popup">
                            <div class="mp-cil-title" data-mp-property-label="cil_number"></div>
                            <div class="mp-cil-label" data-mp-property="cil_label"></div>
                            <div class="mp-cil-description" data-mp-property="cil_description"></div>
                        </div>
                    </div>

                    <div class="mp-header">
                        <h4 data-mp-property="outlet_name">&nbsp;</h4>
                        <p data-mp-property="summary"></p>
                    </div>

                    <div class="mp-body">
                        <div class="mp-body-column">
                            <div class="mp-column-item" data-mp-property-pair="owner_name">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="owner_type">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="city_based">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="counties_served_label">
                                <label></label>
                                <span></span>
                            </div>
                        </div>
                        <div class="mp-body-column">
                            <div class="mp-column-item" data-mp-property-pair="medium_primary">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="frequency">
                                <label></label>
                                <span></span>
                            </div>
                            <div class="mp-column-item" data-mp-property-pair="language">
                                <label></label>
                                <span></span>
                            </div>
                        </div>
                    </div>

                    <div class="mp-footer">
                        <div class="mp-footer-column">
                            <a href="#" data-mp-property="website" title="#" target="_parent" class="mp-button">
                                <i class="fa-solid fa-globe"></i>
                                <span data-mp-property-label="website"></span>
                            </a>
                        </div>
                        <div class="mp-footer-column">
                            <div class="mp-footer-date">
                                <span data-mp-property-label="updated_at"></span>&nbsp;<span data-mp-property="updated_at"></span>
                            </div>
                            <div class="mp-footer-icons">
                                <a href="#" data-type="template" title="#" target="_parent"></a>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

        </div>

        <div data-template="popup-cluster">

            <div class="map-popup-wrapper">

                <div class="mp-container">

                    <a href="javascript:;" class="mp-close" title="Close popup"><i class="fa-solid fa-xmark"></i></a>

                    <div class="mp-top"></div>

                    <div class="mp-header">
                        <h4>Nearby Outlets</h4>
                        <p>Select an outlet to see its information</p>
                    </div>

                    <div class="mp-body">
                        <div class="mp-body-row" data-type="template">
                            <div class="mp-row-title" data-mp-property="outlet_name"></div>
                            <p class="mp-row-description">Based in <span data-mp-property="city_based"></span> in <span data-mp-property="county_based"></span> County</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/data/outlets_geojson.js"></script>
    <script src="assets/data/census_json.js"></script>
    <script src="assets/js/map.js"></script>

</body>
</html>