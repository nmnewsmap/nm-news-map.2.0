<!DOCTYPE html>
<html lang="en">
<head>

    <title>New Mexico News Media Map</title>

    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="New Mexico News Media Map" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet" />
    <link href="assets/css/map.css" rel="stylesheet" />

</head>

<body>

    <div id="map"></div>

    <div id="legend" class="legend"></div>

    <!-- Census Overlay Controls -->
    <div id="census-controls" style="position: absolute; top: 280px; right: 10px; background: rgba(255, 255, 255, 0.5); padding: 10px; border-radius: 5px; box-shadow: 0 1px 4px rgba(0,0,0,0.3); font-size: 12px; width: 220px; z-index: 1000; backdrop-filter: blur(5px);">
        <div style="font-weight: bold; margin-bottom: 8px; color: #333;">Census Data Overlays</div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="none" checked style="margin-right: 5px;">
            No Overlay
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="population" style="margin-right: 5px;">
            Population Size
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="income" style="margin-right: 5px;">
            Median Household Income
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="business" style="margin-right: 5px;">
            Private Business
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="education" style="margin-right: 5px;">
            College Education
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="age" style="margin-right: 5px;">
            Median Age
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="nonwhite" style="margin-right: 5px;">
            Nonwhite Population
            </label>
        </div>
        <div style="margin-bottom: 5px;">
            <label style="cursor: pointer; display: block; padding: 2px 0;">
            <input type="radio" name="census-layer" value="broadband" style="margin-right: 5px;">
            Homes with Broadband
            </label>
        </div>
        <div id="census-legend" style="margin-top: 10px; padding-top: 8px; border-top: 1px solid #ddd; font-size: 10px;">
            <!-- Dynamic legend will appear here -->
        </div>
        <div style="margin-top: 10px; padding-top: 8px; border-top: 1px solid #ddd; font-size: 9px; color: #666; line-height: 1.3;">
            <strong>Data Source:</strong><br>
            U.S. Census Bureau<br>
            2022 American Community Survey<br>
            5-Year Estimates
        </div>
    </div>

    <script src="assets/data/outlets_geojson.js"></script>
    <script src="assets/data/census_json.js"></script>
    <script src="assets/js/controls.js"></script>
    <script src="assets/js/map.js"></script>

    <div id="map-templates">
        <div data-template="popup">
            <div class="map-popup-wrapper">
                <h4 data-popup-property="title"></h4>
                <div class="map-popup-section" data-type="template">
                    <div class="map-popup-section-title"></div>
                    <div class="map-popup-section-data">
                        <div class="map-popup-section-property" data-type="template">
                            <label></label>
                            <div class="map-popup-property-value"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>